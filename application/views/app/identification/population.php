<?php
$nationals = array(
    'Afghanistan',
    'Albanian',
    'Algerian',
    'American',
    'Andorran',
    'Angolan',
    'Antiguans',
    'Argentinean',
    'Armenian',
    'Australian',
    'Austrian',
    'Azerbaijani',
    'Bahamian',
    'Bahraini',
    'Bangladeshi',
    'Barbadian',
    'Barbudans',
    'Batswana',
    'Belarusian',
    'Belgian',
    'Belizean',
    'Beninese',
    'Bhutanese',
    'Bolivian',
    'Bosnian',
    'Brazilian',
    'British',
    'Bruneian',
    'Bulgarian',
    'Burkinabe',
    'Burmese',
    'Burundian',
    'Cambodian',
    'Cameroonian',
    'Canadian',
    'Cape Verdean',
    'Central African',
    'Chadian',
    'Chilean',
    'Chinese',
    'Colombian',
    'Comoran',
    'Congolese',
    'Costa Rican',
    'Croatian',
    'Cuban',
    'Cypriot',
    'Czech',
    'Danish',
    'Djibouti',
    'Dominican',
    'Dutch',
    'East Timorese',
    'Ecuadorean',
    'Egyptian',
    'Emirian',
    'Equatorial Guinean',
    'Eritrean',
    'Estonian',
    'Ethiopian',
    'Fijian',
    'Filipino',
    'Finnish',
    'French',
    'Gabonese',
    'Gambian',
    'Georgian',
    'German',
    'Ghanaian',
    'Greek',
    'Grenadian',
    'Guatemalan',
    'Guinea-Bissauan',
    'Guinean',
    'Guyanese',
    'Haitian',
    'Herzegovinian',
    'Honduran',
    'Hungarian',
    'I-Kiribati',
    'Icelander',
    'Indian',
    'Indonesian',
    'Iranian',
    'Iraqi',
    'Irish',
    'Israeli',
    'Italian',
    'Ivorian',
    'Jamaican',
    'Japanese',
    'Jordanian',
    'Kazakhstani',
    'Kenyan',
    'Kittian and Nevisian',
    'Kuwaiti',
    'Kyrgyz',
    'Laotian',
    'Latvian',
    'Lebanese',
    'Liberian',
    'Libyan',
    'Liechtensteiner',
    'Lithuanian',
    'Luxembourger',
    'Macedonian',
    'Malagasy',
    'Malawian',
    'Malaysian',
    'Maldivan',
    'Malian',
    'Maltese',
    'Marshallese',
    'Mauritanian',
    'Mauritian',
    'Mexican',
    'Micronesian',
    'Moldovan',
    'Monacan',
    'Mongolian',
    'Moroccan',
    'Mosotho',
    'Motswana',
    'Mozambican',
    'Namibian',
    'Nauruan',
    'Nepalese',
    'New Zealander',
    'Nicaraguan',
    'Nigerian',
    'Nigerien',
    'North Korean',
    'Northern Irish',
    'Norwegian',
    'Omani',
    'Pakistani',
    'Palauan',
    'Panamanian',
    'Papua New Guinean',
    'Paraguayan',
    'Peruvian',
    'Polish',
    'Portuguese',
    'Qatari',
    'Romanian',
    'Russian',
    'Rwandan',
    'Saint Lucian',
    'Salvadoran',
    'Samoan',
    'San Marinese',
    'Sao Tomean',
    'Saudi',
    'Scottish',
    'Senegalese',
    'Serbian',
    'Seychellois',
    'Sierra Leonean',
    'Singaporean',
    'Slovakian',
    'Slovenian',
    'Solomon Islander',
    'Somali',
    'South African',
    'South Korean',
    'Spanish',
    'Sri Lankan',
    'Sudanese',
    'Surinamer',
    'Swazi',
    'Swedish',
    'Swiss',
    'Syrian',
    'Taiwanese',
    'Tajik',
    'Tanzanian',
    'Thai',
    'Togolese',
    'Tongan',
    'Trinidadian/Tobagonian',
    'Tunisian',
    'Turkish',
    'Tuvaluan',
    'Ugandan',
    'Ukrainian',
    'Uruguayan',
    'Uzbekistani',
    'Venezuelan',
    'Vietnamese',
    'Welsh',
    'Yemenite',
    'Zambian',
    'Zimbabwean'
);

$language = array(
    'English',
    'Afar',
    'Abkhazian',
    'Afrikaans',
    'Amharic',
    'Arabic',
    'Assamese',
    'Aymara',
    'Azerbaijani',
    'Bashkir',
    'Byelorussian',
    'Bulgarian',
    'Bihari',
    'Bislama',
    'Bengali/Bangla',
    'Tibetan',
    'Breton',
    'Catalan',
    'Corsican',
    'Czech',
    'Welsh',
    'Danish',
    'German',
    'Bhutani',
    'Greek',
    'Esperanto',
    'Spanish',
    'Estonian',
    'Basque',
    'Persian',
    'Finnish',
    'Fiji',
    'Faeroese',
    'French',
    'Frisian',
    'Irish',
    'Scots/Gaelic',
    'Galician',
    'Guarani',
    'Gujarati',
    'Hausa',
    'Hindi',
    'Croatian',
    'Hungarian',
    'Armenian',
    'Interlingua',
    'Interlingue',
    'Inupiak',
    'Indonesian',
    'Icelandic',
    'Italian',
    'Hebrew',
    'Japanese',
    'Yiddish',
    'Javanese',
    'Georgian',
    'Kazakh',
    'Greenlandic',
    'Cambodian',
    'Kannada',
    'Korean',
    'Kashmiri',
    'Kurdish',
    'Kirghiz',
    'Latin',
    'Lingala',
    'Laothian',
    'Lithuanian',
    'Latvian/Lettish',
    'Malagasy',
    'Maori',
    'Macedonian',
    'Malayalam',
    'Mongolian',
    'Moldavian',
    'Marathi',
    'Malay',
    'Maltese',
    'Burmese',
    'Nauru',
    'Nepali',
    'Dutch',
    'Norwegian',
    'Occitan',
    '(Afan)/Oromoor/Oriya',
    'Punjabi',
    'Polish',
    'Pashto/Pushto',
    'Portuguese',
    'Quechua',
    'Rhaeto-Romance',
    'Kirundi',
    'Romanian',
    'Russian',
    'Kinyarwanda',
    'Sanskrit',
    'Sindhi',
    'Sangro',
    'Serbo-Croatian',
    'Singhalese',
    'Slovak',
    'Slovenian',
    'Samoan',
    'Shona',
    'Somali',
    'Albanian',
    'Serbian',
    'Siswati',
    'Sesotho',
    'Sundanese',
    'Swedish',
    'Swahili',
    'Tamil',
    'Tegulu',
    'Tajik',
    'Thai',
    'Tigrinya',
    'Turkmen',
    'Tagalog',
    'Setswana',
    'Tonga',
    'Turkish',
    'Tsonga',
    'Tatar',
    'Twi',
    'Ukrainian',
    'Urdu',
    'Uzbek',
    'Vietnamese',
    'Volapuk',
    'Wolof',
    'Xhosa',
    'Yoruba',
    'Chinese',
    'Zulu',
);
?>

<div class="app-main__outer">
    <div class="app-main__inner">
        <!-- notifications -->
        <?php
        if ((isset($_SESSION['success'])) OR (isset($_SESSION['error']))) { ?>
            <div class="container mt-4 pt-4">
                <span class="text-dark">
                    <?php include_once "application/views/alertes/alert-index.php"; ?>
                </span>
            </div>
        <?php } ?>
        <!-- end -->
        <div class="app-page-title">
            <div class="page-title-wrapper">
                <div class="page-title-heading">
                    <div class="page-title-icon">
                        <i class="lnr-picture text-danger"></i>
                    </div>
                    <div>
                        <span class="font-weight-bold">Identification des personnes</span>
                        <div class="page-title-subheading">
                            Inline validation is very easy to implement using the
                            Architect Framework.
                            <ul class="app-breadcrumb breadcrumb text-capitalize">
                                <li class="breadcrumb-item font-weight-bold"><a href="<?= base_url().$this->uri->segment(1); ?>">Accueil</a></li>
                                <li class="breadcrumb-item font-weight-bold"><a href="<?= base_url().$this->uri->segment(1).'/'.$this->uri->segment(2); ?>"><?= $this->uri->segment(2)?> </a></li>
                                <li class="breadcrumb-item disabled" disabled><?= $this->uri->segment(3)?></li>
                            </ul>
                        </div>

                    </div>
                </div>
                <div class="page-title-actions">
                    <div class="d-inline-block dropdown">
                        <button type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                class="btn-shadow dropdown-toggle btn btn-info">
                                            <span class="btn-icon-wrapper pr-2 opacity-7">
                                                <i class="fa fa-business-time fa-w-20"></i>
                                            </span>
                            Buttons
                        </button>
                        <div tabindex="-1" role="menu" aria-hidden="true"
                             class="dropdown-menu dropdown-menu-right">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                    <a href="javascript:void(0);" class="nav-link">
                                        <i class="nav-link-icon lnr-inbox"></i>
                                        <span>
                                                            Inbox
                                                        </span>
                                        <div class="ml-auto badge badge-pill badge-secondary">86</div>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:void(0);" class="nav-link">
                                        <i class="nav-link-icon lnr-book"></i>
                                        <span>
                                                            Book
                                                        </span>
                                        <div class="ml-auto badge badge-pill badge-danger">5</div>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:void(0);" class="nav-link">
                                        <i class="nav-link-icon lnr-picture"></i>
                                        <span>
                                                            Picture
                                                        </span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a disabled href="javascript:void(0);" class="nav-link disabled">
                                        <i class="nav-link-icon lnr-file-empty"></i>
                                        <span>
                                                            File Disabled
                                                        </span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="main-card mb-3 card">
            <div class="card-body">
                <h5 class="card-title">Identification de la population</h5>
                <span style="color:red;"><b><?= $this->session->population; ?></b></span>
                <form class="needs-validation"  method="post" role="form"
                action="<?= base_url('UI/addPatient'); ?>">
                    <!--

                      /*
                     * `patient_id`, `patient_fullname`, `patient_address`, `patient_phone`, `patient_email`,
                     *  `date_created`, `office_address`, `patient_profession`, `office_phone`, `personne_contact`,
                     *  `patient_temperature`, `patient_maps`, `patient_symptome`,
                     *  `patient_taille`, `patient_poids`, `patient_age`, `commune_habitee`, `piece_jointe`, `patient_resume`
                     */
                     -->
                    <div class="form-row">
                        <div class="col-md-4 mb-3">
                            <label for="patient_name"> <span class="text-danger">*</span>Nom de la personne</label>
                            <input type="text" class="form-control text-capitalize" id="patient_name" name="patient_name"
                               value="<?= set_value('patient_name'); ?>" >
                            <div class="<?php echo form_error('patient_name')? 'invalid-feedback':'valid-feedback'; ?>">
                                <span class="<?php echo form_error('patient_name') ? 'text-danger':'text-success'; ?>">
                                     <?php echo form_error('patient_name') ? 'Nom obligatoire' :'Nom valide !'; ?>
                                </span>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="patient_lastname">Prenom de la personne</label>
                            <input type="text" class="form-control text-capitalize" id="patient_lastname"
                                  name="patient_lastname" value="<?= set_value('patient_lastname'); ?>">
                            <span class="<?php echo form_error('patient_lastname') ? 'text-danger':'text-success'; ?>">
                                     <?php echo form_error('patient_lastname') ? 'Prenom obligatoire' :'Prenom valide !'; ?>
                                </span>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="patient_email">Adresse mail de la personne</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="patient_email">@</span>
                                </div>
                                <input type="email" class="form-control text-lowercase" id="patient_email"
                                      name="patient_email" value="<?= set_value('patient_email'); ?>">

                            </div>
                            <span class="<?php echo form_error('patient_email') ? 'text-danger':'text-success'; ?>">
                                     <?php echo form_error('patient_email') ? 'Email obligatoire' :'Email valide !'; ?>
                                </span>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-4 mb-3">
                            <label for="patient_address">Adresse domicilaire de la personne</label>
                            <input type="text" class="form-control text-capitalize" id="patient_address"
                                  name="patient_address" value="<?= set_value('patient_address'); ?>">
                            <span class="<?php echo form_error('patient_address') ? 'text-danger':'text-success'; ?>">
                                     <?php echo form_error('patient_address') ? 'Adresse obligatoire' :'Adresse valide !'; ?>
                                </span>
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="office_address">Adresse du bureau</label>
                            <input type="text" class="form-control text-capitalize" id="office_address"
                                name="office_address" value="<?= set_value('office_address'); ?>">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="office_address">Profession de la personne</label>
                            <input type="text" class="form-control text-capitalize" id="office_address"
                                  name="office_address" value="<?= set_value('office_address'); ?>">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="patient_phone">Numero de telephone portable</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="patient_phone">+243</span>
                                </div>
                                <input type="text" class="form-control text-capitalize" id="patient_phone"
                                      name="patient_phone" value="<?= set_value('patient_phone'); ?>">

                            </div>
                            <span class="<?php echo form_error('patient_phone') ? 'text-danger':'text-success'; ?>">
                                     <?php echo form_error('patient_phone') ? 'Telephone obligatoire' :'Telephone valide !'; ?>
                                </span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="office_phone">Telephone du bureau</label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text" id="office_phone">+243</span>
                                </div>
                                <input type="text" class="form-control" id="office_phone"
                                       name="office_phone" value="<?= set_value('office_phone'); ?>">
                            </div>
                        </div>

                    </div>
                    <div class="form-row">
                        <div class="col-md-4 mb-3">
                            <label for="patient_temperature">Temperature de la personne</label>
                            <input type="text" class="form-control" id="patient_temperature"
                                  name="patient_temperature" value="<?= set_value('patient_temperature'); ?>">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="patient_maps">Coordonnees de la geolocalisation</label>
                            <input type="text" class="form-control text-capitalize" id="patient_maps"
                                   name="patient_maps" value="<?= set_value('patient_maps'); ?>">
                        </div>
                        <div class="col-md-4">
                            <div class="form-group">
                                <label for="pays_provenance" class="control-label"><span
                                            class="text-danger">*</span>Pays de provenance</label>
                                <select class="browser-default custom-select select2"
                                        name="pays_provenance" id="pays_provenance">
                                    <option selected disabled>Choisir un pays de provenance</option>
                                    <?php for ($k = 0; $k < count($nationals); $k++) : ?>
                                        <option><?= $nationals[$k]; ?></option>
                                    <?php endfor; ?>
                                </select>
                                <span class="<?= form_error('nationalite_naissance') ? 'is-invalid' : 'is-valid' ?>">
                                    <?php echo form_error('pays_provenance'); ?></span>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-12 mb-3">
                            <label for="patient_symptome">Etat de sante (antecedents medicaux) de la personne</label>
                            <input type="text" class="form-control text-capitalize" id="patient_symptome"
                                   name="patient_symptome" value="<?= set_value('patient_symptome'); ?>">
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="patient_age">Quel age a t-elle? </label>
                            <input type="text" class="form-control" id="patient_age"
                                   name="patient_age" value="<?= set_value('patient_age'); ?>">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="patient_taille">Combien la personne mesure t-elle? </label>
                            <input type="text" class="form-control" id="patient_taille"
                                    name="patient_taille" value="<?= set_value('patient_taille'); ?>">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="patient_poids">Combien la personne pese t-elle? </label>
                            <input type="text" class="form-control" id="patient_poids"
                                  name="patient_poids" value="<?= set_value('patient_poids'); ?>">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-4 mb-3">
                            <label for="numero_plaque">Numero plaque du vehicule de transport</label>
                            <input type="text" class="form-control text-uppercase" id="numero_plaque"
                                  name="numero_plaque" value="<?= set_value('personne_contact'); ?>">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="nom_chauffeur">Nom du chauffeur de ce vehicule </label>
                            <input type="text" class="form-control text-capitalize" id="nom_chauffeur"
                                  name="nom_chauffeur" value="<?= set_value('nom_chauffeur'); ?>">
                        </div>
                        <div class="col-md-4 mb-3">
                            <label for="personne_contact">Combien de personnes etaient dans ce vehicule?</label>
                            <input type="text" class="form-control" id="personne_contact"
                                    name="personne_contact" value="<?= set_value('personne_contact'); ?>">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-6 mb-3">
                            <label for="poste_frontalier">Par quel poste frontalier est-il passee? </label>
                            <select class="browser-default custom-select select2"
                                    name="poste_frontalier" id="poste_frontalier">
                                <option selected disabled>Choisissez un poste frontalier</option>
                                <option>Kasumbalesa</option>
                                <option>Mokambo</option>
                                <option>Angola</option>
                                <option>Mpweto</option>
                                <option>Kasenga</option>
                            </select>
                            <span class="<?= form_error('poste_frontalier') ? 'is-invalid' : 'is-valid' ?>">
                                    <?php echo form_error('poste_frontalier'); ?></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="date_heure_entree">Date et Heure du jour d'entree </label>
                            <input type="datetime-local" class="form-control" id="date_heure_entree"
                                   name="date_heure_entree"
                                   value="<?php $datejour=date('Y-m-d H:i:s'); echo utf8_encode(strftime("%c",
                                       strtotime($datejour))); ?><?= set_value('date_heure_entree'); ?>">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-md-6 mb-3">
                            <div class="position-relative form-group">
                                <label for="exampleSelectMulti" class="commune_habitee">Commune de residence ou de son domicile</label>
                                <select name="select" id="exampleSelect" class="custom-select">
                                    <option>Lubumbashi</option>
                                    <option>Kamalondo</option>
                                    <option>Kampemba</option>
                                    <option>Kenya</option>
                                    <option>Katuba</option>
                                    <option>Annexe</option>
                                    <option>Rwashi</option>
                                </select>
                            </div>
                        </div>

                        <div class="col-md-6 mb-3">
                            <div class="position-relative form-group">
                                <label for="exampleFile" class="piece_jointe">Piece jointe
                                    <small class="text-muted">
                                        (Format de fichier acceptes .pdf|.docx|.xlxs|.txt)
                                    </small></label>
                                <input name="file" id="exampleFile" type="file" class="form-control">
                            </div>
                        </div>

                    </div>
                    <div class="form-row">
                        <div class="col-md-12 mb-3">
                            <div class="position-relative form-group">
                                <label for="exampleText" class="patient_resume">Notes d'observation sur la personne identifiee</label>
                                <textarea name="patient_resume" id="exampleText" class="form-control text-capitalize"></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" value="" id="invalidCheck">
                            <label class="form-check-label" for="invalidCheck">
                                La personne est-elle d'accord avec nos <a href="">termes</a> et <a
                                        href="">conditions</a> d'utilisation de ses donnees ?
                            </label>
                            <div class="invalid-feedback">
                                You must agree before submitting.
                            </div>
                        </div>
                    </div>
                    <button class="btn btn-primary" type="submit">Sauvegarder les donnees</button>
                </form>

            </div>
        </div>
        <div class="main-card mb-3 card">
            <div class="card-body">
                <h5 class="card-title">Liste des personnes deja identifiees</h5>
                <div class="table-responsive">
                    <table class="mb-0 table table-sm table-hover">
                        <thead class="bg-dark text-white">
                        <tr>
                            <th>#</th>
                            <th>Nom personne</th>
                            <th>Age </th>
                            <th>Pays provenance</th>
                            <th>Telephone</th>
                            <th>Adresse domicile</th>
                            <th>Temperature</th>
                            <th>Derniere MAJ</th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php $line = 1;
                        if(isset($patients)):
                        foreach ($patients as $value): ?>
                        <tr>
                            <th scope="row"><?= $line ?></th>
                            <td class="text-capitalize"><?= $value->patient_fullname ?></td>
                            <td class="text-capitalize"><?= $value->patient_age ?></td>
                            <td class="text-capitalize"><?= $value->pays_provenance ?></td>
                            <td class="text-capitalize"><?= $value->patient_phone ?></td>
                            <td class="text-capitalize"><?= $value->patient_address ?></td>
                            <td class="text-capitalize"><?= $value->patient_temperature ?></td>
                            <td class="text-capitalize"><?= $value->date_update ?></td>
                        </tr>
                            <?php $line++; endforeach;
                            else:?>
                            <tr>
                                <td class="text-center" colspan="5">Aucune information trouvee !</td>
                            </tr>
                        <?php endif;?>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>