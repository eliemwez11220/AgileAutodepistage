<?php
$nationals = array(
    'Afghanistan',
    'Albanian',
    'Algerian',
    'American',
    'Andorran',
    'Angolan',
    'Antiguans',
    'Argentinean',
    'Armenian',
    'Australian',
    'Austrian',
    'Azerbaijani',
    'Bahamian',
    'Bahraini',
    'Bangladeshi',
    'Barbadian',
    'Barbudans',
    'Batswana',
    'Belarusian',
    'Belgian',
    'Belizean',
    'Beninese',
    'Bhutanese',
    'Bolivian',
    'Bosnian',
    'Brazilian',
    'British',
    'Bruneian',
    'Bulgarian',
    'Burkinabe',
    'Burmese',
    'Burundian',
    'Cambodian',
    'Cameroonian',
    'Canadian',
    'Cape Verdean',
    'Central African',
    'Chadian',
    'Chilean',
    'Chinese',
    'Colombian',
    'Comoran',
    'Congolese',
    'Costa Rican',
    'Croatian',
    'Cuban',
    'Cypriot',
    'Czech',
    'Danish',
    'Djibouti',
    'Dominican',
    'Dutch',
    'East Timorese',
    'Ecuadorean',
    'Egyptian',
    'Emirian',
    'Equatorial Guinean',
    'Eritrean',
    'Estonian',
    'Ethiopian',
    'Fijian',
    'Filipino',
    'Finnish',
    'French',
    'Gabonese',
    'Gambian',
    'Georgian',
    'German',
    'Ghanaian',
    'Greek',
    'Grenadian',
    'Guatemalan',
    'Guinea-Bissauan',
    'Guinean',
    'Guyanese',
    'Haitian',
    'Herzegovinian',
    'Honduran',
    'Hungarian',
    'I-Kiribati',
    'Icelander',
    'Indian',
    'Indonesian',
    'Iranian',
    'Iraqi',
    'Irish',
    'Israeli',
    'Italian',
    'Ivorian',
    'Jamaican',
    'Japanese',
    'Jordanian',
    'Kazakhstani',
    'Kenyan',
    'Kittian and Nevisian',
    'Kuwaiti',
    'Kyrgyz',
    'Laotian',
    'Latvian',
    'Lebanese',
    'Liberian',
    'Libyan',
    'Liechtensteiner',
    'Lithuanian',
    'Luxembourger',
    'Macedonian',
    'Malagasy',
    'Malawian',
    'Malaysian',
    'Maldivan',
    'Malian',
    'Maltese',
    'Marshallese',
    'Mauritanian',
    'Mauritian',
    'Mexican',
    'Micronesian',
    'Moldovan',
    'Monacan',
    'Mongolian',
    'Moroccan',
    'Mosotho',
    'Motswana',
    'Mozambican',
    'Namibian',
    'Nauruan',
    'Nepalese',
    'New Zealander',
    'Nicaraguan',
    'Nigerian',
    'Nigerien',
    'North Korean',
    'Northern Irish',
    'Norwegian',
    'Omani',
    'Pakistani',
    'Palauan',
    'Panamanian',
    'Papua New Guinean',
    'Paraguayan',
    'Peruvian',
    'Polish',
    'Portuguese',
    'Qatari',
    'Romanian',
    'Russian',
    'Rwandan',
    'Saint Lucian',
    'Salvadoran',
    'Samoan',
    'San Marinese',
    'Sao Tomean',
    'Saudi',
    'Scottish',
    'Senegalese',
    'Serbian',
    'Seychellois',
    'Sierra Leonean',
    'Singaporean',
    'Slovakian',
    'Slovenian',
    'Solomon Islander',
    'Somali',
    'South African',
    'South Korean',
    'Spanish',
    'Sri Lankan',
    'Sudanese',
    'Surinamer',
    'Swazi',
    'Swedish',
    'Swiss',
    'Syrian',
    'Taiwanese',
    'Tajik',
    'Tanzanian',
    'Thai',
    'Togolese',
    'Tongan',
    'Trinidadian/Tobagonian',
    'Tunisian',
    'Turkish',
    'Tuvaluan',
    'Ugandan',
    'Ukrainian',
    'Uruguayan',
    'Uzbekistani',
    'Venezuelan',
    'Vietnamese',
    'Welsh',
    'Yemenite',
    'Zambian',
    'Zimbabwean'
);

$language = array(
    'English',
    'Afar',
    'Abkhazian',
    'Afrikaans',
    'Amharic',
    'Arabic',
    'Assamese',
    'Aymara',
    'Azerbaijani',
    'Bashkir',
    'Byelorussian',
    'Bulgarian',
    'Bihari',
    'Bislama',
    'Bengali/Bangla',
    'Tibetan',
    'Breton',
    'Catalan',
    'Corsican',
    'Czech',
    'Welsh',
    'Danish',
    'German',
    'Bhutani',
    'Greek',
    'Esperanto',
    'Spanish',
    'Estonian',
    'Basque',
    'Persian',
    'Finnish',
    'Fiji',
    'Faeroese',
    'French',
    'Frisian',
    'Irish',
    'Scots/Gaelic',
    'Galician',
    'Guarani',
    'Gujarati',
    'Hausa',
    'Hindi',
    'Croatian',
    'Hungarian',
    'Armenian',
    'Interlingua',
    'Interlingue',
    'Inupiak',
    'Indonesian',
    'Icelandic',
    'Italian',
    'Hebrew',
    'Japanese',
    'Yiddish',
    'Javanese',
    'Georgian',
    'Kazakh',
    'Greenlandic',
    'Cambodian',
    'Kannada',
    'Korean',
    'Kashmiri',
    'Kurdish',
    'Kirghiz',
    'Latin',
    'Lingala',
    'Laothian',
    'Lithuanian',
    'Latvian/Lettish',
    'Malagasy',
    'Maori',
    'Macedonian',
    'Malayalam',
    'Mongolian',
    'Moldavian',
    'Marathi',
    'Malay',
    'Maltese',
    'Burmese',
    'Nauru',
    'Nepali',
    'Dutch',
    'Norwegian',
    'Occitan',
    '(Afan)/Oromoor/Oriya',
    'Punjabi',
    'Polish',
    'Pashto/Pushto',
    'Portuguese',
    'Quechua',
    'Rhaeto-Romance',
    'Kirundi',
    'Romanian',
    'Russian',
    'Kinyarwanda',
    'Sanskrit',
    'Sindhi',
    'Sangro',
    'Serbo-Croatian',
    'Singhalese',
    'Slovak',
    'Slovenian',
    'Samoan',
    'Shona',
    'Somali',
    'Albanian',
    'Serbian',
    'Siswati',
    'Sesotho',
    'Sundanese',
    'Swedish',
    'Swahili',
    'Tamil',
    'Tegulu',
    'Tajik',
    'Thai',
    'Tigrinya',
    'Turkmen',
    'Tagalog',
    'Setswana',
    'Tonga',
    'Turkish',
    'Tsonga',
    'Tatar',
    'Twi',
    'Ukrainian',
    'Urdu',
    'Uzbek',
    'Vietnamese',
    'Volapuk',
    'Wolof',
    'Xhosa',
    'Yoruba',
    'Chinese',
    'Zulu',
);
?>

<div class="app-main__outer">
    <div class="app-main__inner">
        <!-- notifications -->
        <?php
        if ((isset($_SESSION['success'])) OR (isset($_SESSION['error']))) { ?>
            <div class="container mt-4 pt-4">
                <span class="text-dark">
                    <?php include_once "application/views/alertes/alert-index.php"; ?>
                </span>
            </div>
        <?php } ?>
        <!-- end -->
        <div class="app-page-title">
            <div class="page-title-wrapper">
                <div class="page-title-heading">
                    <div class="page-title-icon">
                        <i class="lnr-picture text-danger"></i>
                    </div>
                    <div>
                        <span class="font-weight-bold">Trouver un contact d'une personne x</span>
                        <div class="page-title-subheading">
                            Veuillez effectuer vos recherches sur base de criteres indiquer ci-dessous.
                            <ul class="app-breadcrumb breadcrumb text-capitalize">
                                <li class="breadcrumb-item font-weight-bold"><a
                                            href="<?= base_url() . $this->uri->segment(1); ?>">Accueil</a></li>
                                <li class="breadcrumb-item font-weight-bold"><a
                                            href="<?= base_url() . $this->uri->segment(1) . '/' . $this->uri->segment(2); ?>"><?= $this->uri->segment(2) ?> </a>
                                </li>
                                <li class="breadcrumb-item disabled" disabled><?= $this->uri->segment(3) ?></li>
                            </ul>
                        </div>

                    </div>
                </div>
                <div class="page-title-actions">
                    <div class="d-inline-block dropdown">
                        <button type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                                class="btn-shadow dropdown-toggle btn btn-info">
                                            <span class="btn-icon-wrapper pr-2 opacity-7">
                                                <i class="fa fa-business-time fa-w-20"></i>
                                            </span>
                            Criteres rapides
                        </button>
                        <div tabindex="-1" role="menu" aria-hidden="true"
                             class="dropdown-menu dropdown-menu-right">
                            <ul class="nav flex-column">
                                <li class="nav-item">
                                    <a href="javascript:void(0);" class="nav-link">
                                        <i class="nav-link-icon lnr-inbox"></i>
                                        <span>Vehicule</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:void(0);" class="nav-link">
                                        <i class="nav-link-icon lnr-book"></i>
                                        <span>Personne</span>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a href="javascript:void(0);" class="nav-link">
                                        <i class="nav-link-icon lnr-picture"></i>
                                        <span>Chauffeur</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="main-card mb-3 card">
            <div class="card-header">
                <h5 class="card-title">Recherche d'un contact prealablement identifiee</h5>
                <br>
                <br>
                <strong>Veuillez determiner votre critere de recherche.
                    Vous pouvez saisir le nom de la personne par numero plaque du vehicule.</strong>
            </div>
            <div class="card-body">

                <span style="color:red;"><b><?= $this->session->population; ?></b></span>
                <form  method="post" action="<?= base_url('UI/contacts'); ?>">

                    <div class="form-row">
                        <div class="col-md-12 mb-3">
                            <label for="zone_selection_critere">Veuillez selectionner une option avant de saisir le critere</label>
                            <select class="browser-default custom-select select2"
                                    name="zone_selection_critere" id="zone_selection_critere" required>
                                <option selected disabled>Choisissez une option</option>
                                <option value="fullname">Personne</option>
                                <option value="plaque">Vehicule</option>
                                <option value="datetime">Date et Heure</option>
                                <option value="pays">Pays de provenance</option>
                            </select>
                            <span class="<?= form_error('zone_selection_critere') ? 'is-invalid' : 'is-valid' ?>">
                                    <?php echo form_error('zone_selection_critere'); ?></span>
                        </div>

                        <div class="col-md-8 mb-3">
                            <label for="critere_recherche">Saisissez un critere de recherche dans cette zone</label>
                            <input type="text" class="form-control text-capitalize" id="critere_recherche"
                                   name="critere_recherche" value="<?= set_value('critere_recherche'); ?>">
                        </div>

                        <div class="col-md-4 mb-3">
                            <label for="date_heure_entree">Date et Heure du jour d'entree </label>
                            <input type="datetime-local" class="form-control" id="date_heure_entree"
                                   name="date_heure_entree"
                                   value="<?= set_value('date_heure_entree'); ?>">
                        </div>
                    </div>
                    <button class="btn btn-primary" type="submit">Rechercher la personne</button>
                </form>

            </div>
        </div>
        <div class="main-card mb-3 card">
            <div class="card-body">
                <h5 class="card-title"><?= $type_liste ?> susceptible d'etre suivi</h5>
                <div class="table-responsive">
                    <table class="mb-0 table table-sm table-hover">
                        <thead class="bg-dark text-white">
                        <tr>
                            <th>#</th>
                            <th>Nom personne</th>
                            <th>Age</th>
                            <th>Pays provenance</th>
                            <th>Telephone</th>
                            <th>Adresse domicile</th>
                            <th>Temperature</th>
                            <th>Date & Heure Entree</th>
                        </tr>
                        </thead>
                        <tbody>
                        <?php $line = 1;
                        if (isset($patients)):
                            foreach ($patients as $value): ?>
                                <tr>
                                    <th scope="row"><?= $line ?></th>
                                    <td class="text-capitalize"><?= $value->patient_fullname ?></td>
                                    <td class="text-capitalize"><?= $value->patient_age ?></td>
                                    <td class="text-capitalize"><?= $value->pays_provenance ?></td>
                                    <td class="text-capitalize"><?= $value->patient_phone ?></td>
                                    <td class="text-capitalize"><?= $value->patient_address ?></td>
                                    <td class="text-capitalize"><?= $value->patient_temperature ?></td>
                                    <td class="text-capitalize"><?= $value->date_heure_entree ?></td>
                                </tr>
                                <?php $line++; endforeach;
                        else:?>
                            <tr>
                                <td class="text-center" colspan="5">Aucune information trouvee !</td>
                            </tr>
                        <?php endif; ?>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="container mt-3 pt-3">

            <div class="card mb-3 pb-3">
                <div class="card-header">
                    <h5> <strong style="justify-content: left;display: flex;font-weight: bold;">Geolocalisation de personnes</strong></h5>
                </div>
                <div class="card-body">
                    <div class="text-center align-middle">
                        <div id="map-container-google-2"
                             style="height: 100%!important;">
                            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3123.8980752017937!2d27.48161031410214!3d-11.66486769172242!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x19723ec141bb210f%3A0xf166ed1acb79bdd7!2s40-15%20Avenue%20Mwepu%2C%20Lubumbashi!5e1!3m2!1sfr!2scd!4v1585925863310!5m2!1sfr!2scd"
                                    frameborder="0" style="border:0;"
                                    allowfullscreen="" aria-hidden="false"
                                    tabindex="0" class="w-100 h-100"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>